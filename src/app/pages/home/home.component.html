<section class="home">
    <div class="container home__container">
        <div class="home__header">
          <ul class="home__options" (clickOutside)="clickedOutside()">
            <li class="menu-container">
              <p class="home__filter" [id]="1" (click)="toggleMenu(1)">Filter</p>

              <div class="menu" *ngIf="toggledMenuId === 1">
                <select class="menu-item" [(ngModel)]="options.selectedByAnswer" (ngModelChange)="onChange($event)">
                  <option>By answer</option>
                  <option>Solved</option>
                  <option>Not solved</option>
                </select>


                <select class="menu-item" [ngModel]="options.selectedByCategory" (ngModelChange)="onChange($event)">
                  <option>By category</option>
                  <option *ngFor="let category of categories">{{category}}</option>
                </select>


                <select class="menu-item" [ngModel]="options.selectedByTime" (ngModelChange)="onChange($event)">
                  <option *ngFor="let option of timeFilters">{{option}}</option>
                </select>
              </div>
            </li>

            <li class="menu-container">
              <p class="home__sort" [id]="2" (click)="toggleMenu(2)">Sort</p>

              <div class="menu" *ngIf="toggledMenuId === 2">
                <div class="menu-item" (click)="sortPosts($event)">New</div>

                <div class="menu-item" (click)="sortPosts($event)">Old</div>
              </div>
            </li>

            <li class="menu-container">
              <p class="home__filter" [id]="3" (click)="toggleMenu(3)">Settings</p>

              <div class="menu" *ngIf="toggledMenuId === 3">
                <select class="menu-item" [ngModel]="options.selectedPostDisplay" (ngModelChange)="onChange($event)">
                  <option>Posts display</option>
                  <option>Tiled</option>
                  <option>Inline</option>
                </select>

                <select class="menu-item" [ngModel]="options.selectedTheme" (ngModelChange)="onChange($event)">
                  <option>Theme</option>
                  <option>Light</option>
                  <option>Dark</option>
                </select>
              </div>
            </li>
          </ul>
        </div>
        <h2 class="home__title">Active questions</h2>

        <div class="home__posts">
            <article
              class="home__post"
              *ngFor="let post of posts"
            >
                <a [routerLink]="'/posts/' + post.id">
                    <h3 class="home__post-title">{{post.title}}</h3>
                </a>

                <div class="home__post-info">
                    <small class="home__post-date">{{post.date | date: 'd/M/yyyy, h:mm a'}}</small>

                    <ul class="home__post-tags">
                        <li class="home__post-tag" *ngFor="let tag of post.tags; let i = index">
                            {{tag}}
                        </li>
                    </ul>
                </div>

                <div class="home__post-moderation" *ngIf="isAdmin">
                  <button
                    class="home__post-approve"
                    type="button"
                    (click)="approvePost(post.id)"
                    *ngIf="!post.isApproved"
                  >Approve</button>
                  <button class="home__post-delete" type="button" (click)="deletePost(post.id)">Delete</button>
                </div>

                <p class="home__moderation-caption" *ngIf="(post.author === userEmail) && !isAdmin">
                  <i>Post on moderation</i>
                </p>
            </article>
        </div>
    </div>
</section>


<footer class="footer">
    <div class="container footer__container">
        <a routerLink="/create-post" class="footer__link">
            <img class="footer__plus" src="../../../assets/png/plus.png" alt="plus">
        </a>
    </div>
</footer>
